<div class="container-fluid">
  <div class="row">
    <div class="col-lg-2 h-100 bg-secondary bg-opacity-80">

      <div class="input-group shadow rounded-5 mt-4">
        <select
          class="form-select-sm rounded-start-5 rounded-end-5 w-100 text-secondary border-start-0 border-secondary border-opacity-25"
          aria-describedby="addon-sort">
          <option value="" selected>YDS</option>
          <option value="YDS">YDS</option>
        </select>
      </div>

      <div>
        <span>{{gradeValues[0]}}</span>
        <mat-slider
          [displayWith]="displayWith.bind(this)"
          [min]="0"
          [max]="gradeValues.length - 1"
          step="1"
          thumbLabel
          discrete>
          <input matSliderStartThumb [value]="0" (change)="onSliderChange1($event)">
          <input matSliderEndThumb [value]="gradeValues.length - 1" (change)="onSliderChange2($event)">
        </mat-slider>
        <span>{{gradeValues.at(-1)}}</span>
      </div>

      <div>
        <h2>Typ trasy</h2>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="selectAll" (change)="toggleAll($event)" checked>
          <label class="form-check-label" for="selectAll">
            Wszystkie typy
          </label>
        </div>
        <div style="margin-left: 15px;">
        <ng-container *ngFor="let type of allTypeNames; let i = index">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" value="" id="'type' + {{i}}" [(ngModel)]="selectedTypes[i]" (change)="onCheckboxChange()">
            <label class="form-check-label" for="'type' + {{i}}">
              {{type}}
            </label>
          </div>
        </ng-container>
        </div>

      </div>



      <div class="input-group shadow rounded-5 mt-4">
        <select
          class="form-select-sm rounded-start-5 rounded-end-5 w-100 text-secondary border-start-0 border-secondary border-opacity-25"
          aria-describedby="addon-sort"
          [(ngModel)]="sector"
          (ngModelChange)="updateSearch()">
          <option value="" selected>Wszystkie grupy ska≈Ç</option>
          <ng-container *ngFor="let parentSector of allParentSectorsForFilters; let i = index">
            <option value="{{parentSector}}">{{parentSector}}</option>
          </ng-container>
        </select>
      </div>


      <br>Filters
      <br>Filters
      <br>Filters
      <br>Filters
    </div>


    <div class="col-lg-8">
      <div class="row justify-content-center mt-3">
        <div class="col-md-10">
          <div class="input-group shadow rounded-5">
        <span class="input-group-text rounded-start-5 bg-white border-end-0" id="addon-loop">
          <i class="bi bi-search fs-5"></i>
        </span>
            <input class="form-control rounded-end-5 border-start-0"
                   placeholder="Short route with ..."
                   type="text"
                   aria-describedby="addon-loop"
                   [(ngModel)]="query"
                   (keydown.enter)="updateSearch()"
            >
          </div>
        </div>
      </div>

      <div class="row mt-3 mb-4">
        <div class="offset-lg-1 col-lg-11">
          <div class="col-md-4">
            <div class="input-group shadow rounded-5">
              <span class="input-group-text w-25 rounded-start-5 bg-white border-end-0" id="addon-sort">
                Sort:
              </span>
              <select
                class="form-select-sm rounded-start-0 rounded-end-5 w-75 text-secondary border-start-0 border-secondary border-opacity-25"
                aria-describedby="addon-sort"
                [(ngModel)]="selectedSort"
                (ngModelChange)="updateSearch()">
                <option value="none" class="text-dark" selected>Best match</option>
                <option value="grade_asc" class="text-dark">Difficulty: lowest first</option>
                <option value="grade_desc" class="text-dark">Difficulty: highest first</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      @for (route of searchResults; track route){
        <app-route-card [route]="route._source"></app-route-card>
      }
<!--    <app-route-card></app-route-card>-->
<!--    <app-route-card></app-route-card>-->
<!--    <app-route-card></app-route-card>-->
    </div>


    <div class="col-lg-2 text-center">
      <div class="mb-4">
        <img alt="Logo" class="img-fluid" src="assets/logo.jpg" style="max-width: 150px;">
      </div>
    </div>
  </div>
</div>

<div *ngIf="searchResults; else noData">
  <h2>Search Results</h2>
  <pre>{{ searchResults | json }}</pre>
</div>
<ng-template #noData>
  <p>No search results to display.</p>
</ng-template>

<div *ngIf="errorMessage">
  <h2>Error</h2>
  <p>{{ errorMessage }}</p>
</div>
